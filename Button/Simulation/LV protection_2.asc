Version 4
SHEET 1 1936 1076
WIRE 1472 -320 64 -320
WIRE 1616 -320 1472 -320
WIRE 1824 -320 1712 -320
WIRE 1856 -320 1824 -320
WIRE 64 -112 64 -320
WIRE 64 -112 -64 -112
WIRE 208 -112 64 -112
WIRE 560 -48 432 -48
WIRE 672 -48 560 -48
WIRE 560 -32 560 -48
WIRE -64 -16 -64 -112
WIRE 432 -16 432 -48
WIRE 1824 48 1824 -320
WIRE 560 64 560 32
WIRE 1472 64 1472 -320
WIRE 432 96 432 64
WIRE -64 128 -64 64
WIRE 208 128 208 -112
WIRE 672 160 672 -48
WIRE 912 160 672 160
WIRE 992 176 992 128
WIRE 1024 176 992 176
WIRE 912 192 912 160
WIRE 960 192 912 192
WIRE 1024 192 1024 176
WIRE 960 208 960 192
WIRE 992 208 960 208
WIRE 1472 208 1472 144
WIRE 1632 208 1632 -272
WIRE 1632 208 1472 208
WIRE 1168 224 1056 224
WIRE 992 240 960 240
WIRE 208 256 208 208
WIRE 832 256 208 256
WIRE 928 256 912 256
WIRE 960 256 960 240
WIRE 960 256 928 256
WIRE 1024 288 1024 256
WIRE 1056 288 1024 288
WIRE 1168 304 1168 224
WIRE 1248 304 1168 304
WIRE 1344 304 1248 304
WIRE 208 320 208 256
WIRE 1472 320 1472 208
WIRE 928 384 928 256
WIRE 960 384 928 384
WIRE 1168 384 1168 304
WIRE 1168 384 1040 384
WIRE 1248 400 1248 304
WIRE 1424 400 1248 400
WIRE 208 448 208 400
WIRE 1472 448 1472 416
WIRE 1824 448 1824 128
WIRE 1824 448 1472 448
WIRE 1472 480 1472 448
WIRE 1056 496 1056 288
FLAG -64 128 0
FLAG -64 -112 Vbatt
FLAG 992 128 Vbatt
FLAG 1344 304 Vg
FLAG 560 64 0
FLAG 1472 480 0
FLAG 1856 -320 VOUT
FLAG 432 96 0
FLAG 1056 496 0
FLAG 208 448 0
SYMBOL voltage -64 -32 R0
WINDOW 3 -210 202 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL(0 3.2 10 1.3 20 3.2)
SYMATTR InstName V1
SYMBOL res 928 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10K
SYMBOL cap 544 -32 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL res 1056 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10Meg
SYMBOL nmos 1424 320 R0
SYMATTR InstName M1
SYMATTR Value BSS123
SYMBOL res 1456 48 R0
SYMATTR InstName R6
SYMATTR Value 3Meg
SYMBOL pmos 1712 -272 M270
SYMATTR InstName M2
SYMATTR Value FDR840P
SYMBOL res 1808 32 R0
SYMATTR InstName R7
SYMATTR Value 1Meg
SYMBOL voltage 432 -32 R0
WINDOW 3 -68 99 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 1.22
SYMATTR InstName V2
SYMBOL Opamps\\opamp2 1024 160 R0
SYMATTR InstName U1
SYMATTR Value tlv9042
SYMBOL res 192 304 R0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL res 192 112 R0
SYMATTR InstName R2
SYMATTR Value 560k
TEXT 136 536 Left 2 !.tran 0 20 0.1 0.1 startup uic
TEXT 128 576 Left 2 ;.dc V1 5.6 9 0.1
TEXT 744 8 Left 2 ;delta = +- Vbatt*R10/R5\nfor non-inverting schmitt opamp
TEXT 128 496 Left 2 !.include C:\\Program Files\\LTC\\LTspiceXVII\\lib\\sub\\tlv9042.lib
