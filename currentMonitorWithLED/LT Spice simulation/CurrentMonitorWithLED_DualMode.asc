Version 4
SHEET 1 2296 1248
WIRE -144 -64 -432 -64
WIRE 16 -64 -144 -64
WIRE 112 -64 80 -64
WIRE 432 -64 432 -96
WIRE 768 -48 768 -96
WIRE 112 -32 112 -64
WIRE -432 0 -432 -64
WIRE 64 0 -64 0
WIRE -144 32 -144 -64
WIRE 432 48 432 16
WIRE 560 48 432 48
WIRE 768 48 768 32
WIRE 16 80 16 -64
WIRE -64 96 -64 0
WIRE -16 96 -64 96
WIRE 432 96 432 48
WIRE 64 112 64 0
WIRE 64 112 48 112
WIRE 256 112 64 112
WIRE -432 128 -432 80
WIRE -144 128 -144 112
WIRE -16 128 -144 128
WIRE -144 160 -144 128
WIRE 768 176 768 128
WIRE 864 176 768 176
WIRE 16 192 16 144
WIRE 432 224 432 176
WIRE 768 224 768 176
WIRE -144 272 -144 240
WIRE 432 320 432 304
WIRE 768 320 768 304
WIRE -48 352 -48 320
WIRE -16 352 -48 352
WIRE 80 352 48 352
WIRE 80 384 80 352
WIRE 80 416 -64 416
WIRE -128 464 -128 416
WIRE -16 464 -128 464
WIRE 80 464 80 416
WIRE 80 464 64 464
WIRE 224 480 224 464
WIRE 256 480 224 480
WIRE 352 480 320 480
WIRE 784 480 784 464
WIRE 816 480 784 480
WIRE 912 480 880 480
WIRE 352 512 352 480
WIRE 912 512 912 480
WIRE 784 544 784 480
WIRE 224 560 224 480
WIRE 752 560 656 560
WIRE -48 576 -48 352
WIRE 192 576 144 576
WIRE 896 576 816 576
WIRE -128 592 -128 464
WIRE -128 592 -320 592
WIRE -80 592 -128 592
WIRE 304 592 256 592
WIRE 352 592 304 592
WIRE 752 592 352 592
WIRE 32 608 -16 608
WIRE 80 608 80 464
WIRE 80 608 32 608
WIRE 192 608 80 608
WIRE -800 624 -960 624
WIRE -656 624 -800 624
WIRE -544 624 -656 624
WIRE -160 624 -464 624
WIRE -80 624 -160 624
WIRE 784 640 784 608
WIRE -960 688 -960 624
WIRE -800 688 -800 624
WIRE -656 688 -656 624
WIRE -160 688 -160 624
WIRE -48 704 -48 640
WIRE -32 704 -48 704
WIRE 48 704 32 704
WIRE 224 704 224 624
WIRE 240 704 224 704
WIRE 320 704 304 704
WIRE 48 720 48 704
WIRE -48 736 -48 704
WIRE 224 736 224 704
WIRE 320 736 320 704
WIRE 784 800 784 784
WIRE 816 800 784 800
WIRE 912 800 880 800
WIRE -256 832 -256 768
WIRE -160 832 -160 768
WIRE -160 832 -256 832
WIRE -32 832 -160 832
WIRE 80 832 80 608
WIRE 144 832 144 576
WIRE 240 832 144 832
WIRE 352 832 352 592
WIRE 352 832 320 832
WIRE 912 832 912 800
WIRE 144 848 144 832
WIRE -32 864 -32 832
WIRE 784 864 784 800
WIRE -160 880 -160 832
WIRE 752 880 512 880
WIRE 896 896 816 896
WIRE -960 912 -960 768
WIRE -800 912 -800 768
WIRE -800 912 -960 912
WIRE -656 912 -656 768
WIRE -656 912 -800 912
WIRE -544 912 -656 912
WIRE -320 912 -320 592
WIRE -320 912 -464 912
WIRE 752 912 672 912
WIRE 144 944 144 928
WIRE -160 976 -160 944
WIRE -32 976 -32 944
WIRE -32 976 -160 976
WIRE 784 976 784 928
WIRE -32 992 -32 976
WIRE -800 1104 -800 1040
WIRE -800 1104 -896 1104
FLAG -432 128 0
FLAG -432 -64 3V
IOPIN -432 -64 Out
FLAG 432 320 0
FLAG 768 320 0
FLAG 432 -96 3V
IOPIN 432 -96 Out
FLAG 768 -96 3V
IOPIN 768 -96 Out
FLAG 560 48 Vref_1
IOPIN 560 48 Out
FLAG 864 176 Vref_2
IOPIN 864 176 Out
FLAG -48 320 3V
IOPIN -48 320 Out
FLAG -48 736 0
FLAG -32 992 Vgnd
IOPIN -32 992 Out
FLAG 224 464 3V
IOPIN 224 464 Out
FLAG 224 736 0
FLAG 144 944 Vgnd
IOPIN 144 944 Out
FLAG 32 608 Amp_1
FLAG 304 592 Amp_2
FLAG 48 720 Vgnd
IOPIN 48 720 Out
FLAG 320 736 Vgnd
IOPIN 320 736 Out
FLAG 80 384 0
FLAG 352 512 0
FLAG 672 912 Vref_2
IOPIN 672 912 In
FLAG 784 464 3V
IOPIN 784 464 Out
FLAG 912 512 0
FLAG 784 640 0
FLAG 784 976 0
FLAG 784 784 3V
IOPIN 784 784 Out
FLAG 912 832 0
FLAG 656 560 Vref_1
IOPIN 656 560 In
FLAG 512 880 Amp_1
IOPIN 512 880 In
FLAG 896 576 COMP_1m
IOPIN 896 576 Out
FLAG 896 896 COMP_60m
IOPIN 896 896 Out
FLAG -144 272 0
FLAG 16 192 0
FLAG 256 112 Vgnd
IOPIN 256 112 Out
FLAG 112 -32 0
FLAG -896 1104 Vgnd
IOPIN -896 1104 Out
DATAFLAG -288 -64 "round($*1k)/1k"
DATAFLAG 544 48 "round($*1k)/1k"
DATAFLAG 816 176 "round($*1k)/1k"
DATAFLAG -656 816 "round(I(R9)*1k)/1k"
DATAFLAG -720 624 "round($*1k)/1k"
DATAFLAG -304 -32 "round(I(V1)*1Meg)/1Meg"
DATAFLAG 352 656 "round($*1k)/1k"
DATAFLAG 16 48 "round(Ix(U5:V+)*1G)/1G"
SYMBOL voltage -432 -16 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.001
SYMATTR InstName V1
SYMATTR Value 3
SYMBOL res 416 -80 R0
SYMATTR InstName R3
SYMATTR Value 1Meg
SYMBOL res 416 80 R0
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL res 752 -64 R0
SYMATTR InstName R5
SYMATTR Value 1Meg
SYMBOL res 752 208 R0
SYMATTR InstName R6
SYMATTR Value 866K
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 416 208 R0
SYMATTR InstName R7
SYMATTR Value 143k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 752 32 R0
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -672 672 R0
SYMATTR InstName R9
SYMATTR Value 100m
SYMBOL res 96 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 99k
SYMBOL res -16 960 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL res 336 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 9k
SYMBOL res 160 944 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL cap 48 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL cap 320 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL cap 32 688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL cap 304 688 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL cap 880 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL cap 880 784 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL res -448 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -160 16 R0
WINDOW 3 30 80 Left 2
SYMATTR Value 1Meg
SYMATTR InstName R1
SYMBOL res -160 144 R0
WINDOW 3 30 81 Left 2
SYMATTR Value 1Meg
SYMATTR InstName R2
SYMBOL cap 80 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMATTR SpiceLine V=25 Irms=2.1 Rser=0.0606238 Lser=0 mfg="KEMET" pn="C1210C104K3RAC" type="X7R"
SYMBOL current -800 768 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 0.3m
SYMBOL Opamps\\LTC6241 16 112 R0
SYMATTR InstName U2
SYMBOL Opamps\\LTC6241 784 576 R0
SYMATTR InstName U5
SYMBOL Opamps\\LTC6241 784 896 R0
SYMATTR InstName U6
SYMBOL res -448 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res -816 944 R0
SYMATTR InstName R19
SYMATTR Value 0.1
SYMBOL res 80 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL res -272 672 R0
SYMATTR InstName R21
SYMATTR Value 0.001
SYMBOL res -176 672 R0
SYMATTR InstName R22
SYMATTR Value 0.001
SYMBOL Opamps\\LTC2054 224 592 R0
SYMATTR InstName U1
SYMBOL Opamps\\LTC2054 -48 608 R0
SYMATTR InstName U3
SYMBOL cap -176 880 R0
SYMATTR InstName C8
SYMATTR Value 1µ
SYMBOL cap -64 400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL current -960 768 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value PULSE(0 12m 0 1p 1p 2m 20m 1000)
TEXT -1152 144 Left 2 !.tran 0 100m 0s 1s startup uic
TEXT -1088 -144 Left 2 ;.dc I1 -100m 100m 1m\n.tran 0 10s 0s 1s
TEXT -392 1184 Left 2 ;1mA * 0.1ohm ---x100---> 0.01V ---x10---> 0.1V\n-60mA * 0.1ohm ---x100---> -0.6V
TEXT 456 312 Left 2 ;309k for 1.7V Vref
